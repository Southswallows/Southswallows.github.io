---
layout: post
title: Wifi、蓝牙、红外(Fujitsu)
category: life
tags: 
keywords: 
description: 
---

##WIFI
###wifi基本信息
- 高频无线电信号
- 基于`IEEE 802.11`标准的无线网路
- 无线通信质量不是很好，数据安全性能比蓝牙差一些
- 发射信号功率低于100mw，低于手机发射功率，相对来说是最安全健康的
- 是一种短距离无线技术
- 板载天线和陶瓷天线或者外置天线接头
- IEEE802.11协议栈、TCP/IP协议栈

###wifi模块
- 通用Wi-Fi模块：USBorSDIO接口模块，需要非常强大的CPU来完成
- 路由器方案Wi-Fi模块：典型的是家用路由器，协议和驱动是借助拥有强大Flash和Ram资源的芯片加Linux操作系统
- `嵌入式Wi-Fi模块：`32位单片机，内置Wi-Fi驱动和协议，接口为一般的MCU接口如UART等

###TCP/IP网络协议
- 网络协议即网络中（包括互联网）传递、管理信息的一些规范。
- 中文译名为传输控制协议/互联网络协议）协议
- 由网络层的IP协议和传输层的TCP协议组成
- 规范了网络上的所有通信设备，尤其是一个主机与另一个主机之间的数据往来格式以及传送方式
- 协议采用了4层的层级结构，每一层都呼叫它的下一层所提供的协议来完成自己的需求。通俗而言：TCP负责发现传输的问题，一有问题就发出信号，要求重新传输，直到所有数据安全正确地传输到目的地。而IP是给因特网的每一台联网设备规定一个地址。  
- 相邻层之间有接口，接口定义下层向上层提供的原语操作和服务。
- 每一层中的活动元素通常称为`实体`
- IP层接收由更低层（网络接口层例如以太网设备驱动程序）发来的数据包，并把该数据包发送到更高层---TCP或UDP层；
- TCP是面向连接的通信协议，通过三次握手建立连接，通讯完成时要拆除连接
- TCP将它的信息送到更高层的应用程序，例如Telnet的服务程序和客户程序。应用程序轮流将信息送回TCP层，TCP层便将它们向下传送到IP层，设备驱动程序和物理介质，最后到接收方。
- 数据格式

    - 数据帧：帧头+IP数据包+帧尾 （帧头包括源和目标主机MAC初步地址及类型，帧尾是校验字）
    - IP数据包：IP头部+TCP数据信息（IP头包括源和目标主机IP地址、类型、生存期等）
    - TCP数据信息：TCP头部+实际数据 (TCP头包括源和目标主机端口号、顺序号、确认号、校验字等）
- TCP和IP就像是信封，要传递的信息被划分成若干段，每一段塞入一个TCP信封，并在该信封面上记录有分段号的信息，再将TCP信封塞入IP大信封，发送上网。在接受端，一个TCP软件包收集信封，抽出数据，按发送前的顺序还原，并加以校验，若发现差错，TCP将会要求重发。
- 由网络层的IP协议和传输层的TCP协议组成
- IPv4，是互联网协议（Internet Protocol，IP）的第四版

-----
- OSI参考模型全称是开放系统互连参考模型(Open System Interconnection Reference Model)。这一参考模型共分为七层：物理层、数据链路层、网络层、传输层、会话层、表示层和应用层
- TCP/IP参考模型,分为四层：网络访问层、互联网层、传输层和应用层


##红外

- - 红外线遥控是利用近红外光传送遥控指令的，波长为0.76um~1.5um。用近红外作为遥控光源，是因为目前红外发射器件(红外发光管)与红外接收器件(光敏二极管、三极管及光电池)的发光与受光峰值波长一般为0.8um~0.94um，在近红外光波段内，二者的光谱正好重合，能够很好地匹配，可以获得较高的传输效率及较高的可靠性。
- **发射机**一般由指令键(或操作杆)、指令编码系统、调制电路、驱动电路、发射电路等几部分组成。当按下指令键或推动操作杆时，**指令编码电路产生所需的指令编码信号**，指令编码信号对载波进行调制，再由驱动电路进行功率放大后由发射电路向外**发射经调制定的指令编码信号**。
- **接收电路**一般由接收电路、放大电路、调制电路、指令译码电路、驱动电路、执行电路(机构)等几部分组成。接收电路将发射器发出的已调制的编码指令信号接收下来，并进行放大后送解调电路，解调电路将已调制的指令编码信号解调出来，即还原为编码信号。指令译码器将编码指令信号进行译码，最后由驱动电路来驱动执行电路实现各种指令的操作控制（机构）。
- 现有的红外遥控包括两种方式：PWM（脉冲宽度调制）和PPM（脉冲位置调制）
- **PWM（脉冲宽度调制）：**以发射红外载波的占空比代表“0”和“1”。为了节省能量，一般情况下，发射红外载波的时间固定，通过改变不发射载波的时间来改变占空比
- **PPM（脉冲位置调制）：**以发射载波的位置表示“0”和“1”。从发射载波到不发射载波为“0”，从不发射载波到发射载波为“1”。其发射载波和不发射载波的时间相同，都为0.68ms，也就是每位的时间是固定的。
- 现在用来学习红外的CPU，无外乎以下几种：MCS-51系列、microchip pic16 系列、winbond w741 系列、holtek ht48 系列


##蓝牙

- 可实现固定设备、移动设备和楼宇个人域网之间的短距离数据交换（使用2.4—2.485GHz的ISM波段的UHF无线电波）
- 蓝牙由蓝牙技术联盟（Bluetooth Special Interest Group，简称SIG）管理。
- IEEE将蓝牙技术列为IEEE 802.15.1
- 蓝牙的波段为2400–2483.5MHz（包括防护频带）。这是全球范围内无需取得执照（但并非无管制的）的工业、科学和医疗用（ISM）波段的 2.4 GHz 短距离无线电频段。
- 多数蓝牙应用是为室内环境而设计的，由于墙的衰减和信号反射造成的信号衰落会使得射程远小于蓝牙产品规定的射程范围
- 蓝牙核心规范规定了最小射程，但是技术上的射程是由应用决定、且是无限的。制造商可根据实际的用例调整射程
- 要使用蓝牙无线技术，设备必须能够解译某些蓝牙配置文件，蓝牙配置文件定义了可能的应用，并规定了蓝牙设备之间通信的一般行为。这些配置文件包括对通信参数和控制的最初设定。配置文件能够节约在双向链路起效之前重新发送参数的时间。广泛的蓝牙配置文件描述很多不同种类的应用或设备用例。
- Wi-Fi主要是用于替代工作场所一般局域网接入中使用的高速线缆的。这类应用有时也称作无线局域网
- 蓝牙主要是用于便携式设备及其应用的。这类应用也被称作无线个人域网（WPAN）
- 蓝牙技术联盟于2010年6月30日正式推出蓝牙核心规格4.0 （称为Bluetooth Smart）。它包括经典蓝牙、高速蓝牙和蓝牙低功耗协议
- 蓝牙被定义为协议层架构，包括核心协议、电缆替代协议、电话传送控制协议、选用协议。所有蓝牙堆栈的强制性协议包括：LMP、L2CAP和SDP。此外，与蓝牙通信的设备基本普遍都能使用HCI和 RFCOMM这些协议。

----
###各种协议

1. LMP：链路管理协议（LMP）用于两个设备之间无线链路的建立和控制。应用于控制器上。
2. L2CAP：逻辑链路控制与适配协议（L2CAP）常用来建立两个使用不同高级协议的设备之间的多路逻辑连接传输。提供无线数据包的分割和重新组装。在基本模式下，L2CAP能最大提供64kb的有效数据包，并且有672字节作为默认MTU（最大传输单元）,以及最小48字节的指令传输单元。
在重复传输和流控制模式下，L2CAP可以通过执行重复传输和CRC校验（循环冗余校验）来检验每个通道数据是否正确或者是否同步。
蓝牙核心规格附录1 在核心规格中添加了两个附加的L2CAP模式。这些模式有效的否决了原始的重传和流控模式。
增强型重传模式（Enhanced Retransmission Mode，简称ERTM）：该模式是原始重传模式的改进版，提供可靠的L2CAP 通道。
流模式（Streaming Mode，简称SM）：这是一个非常简单的模式，没有重传或流控。该模式提供不可靠的L2CAP 通道。
其中任何一种模式的可靠性都是可选择的，并/或由底层蓝牙BDR/EDR空中接口通过配置重传数量和刷新超时而额外保障的。顺序排序是是由底层保障的。
只有ERTM 和 SM中配置的 L2CAP通道才有可能在AMP逻辑链路上运作。
3. SDP
服务发现协议（SDP）允许一个设备发现其他设备支持的服务，和与这些服务相关的参数。比如当用手机去连接蓝牙耳机（其中包含耳机的配置信息、设备状态信息，以及高级音频分类信息（A2DP）等等）。并且这些众多协议的切换需要被每个连接他们的设备设置。每个服务都会被全局独立性识别号（UUID）所识别。根据官方蓝牙配置文档给出了一个UUID的简短格式（16位）。
4. RFCOMM
射频通信（RFCOMM）常用于建立虚拟的串行数据流。RFCOMM提供了基于蓝牙带宽层的二进制数据转换和模拟EIA-232（即早前的的RS-232）串行控制信号，也就是说，它是串口仿真。
RFCOMM向用户提供了简单而且可靠的串行数据流。类似TCP。它可作为AT指令的载体直接用于许多电话相关的协议，以及通过蓝牙作为OBEX的传输层。
许多蓝牙应用都使用RFCOMM由于串行数据的广泛应用和大多数操作系统都提供了可用的API。所以使用串行接口通讯的程序可以很快的移植到RFCOMM上面。
5. BNEP
网络封装协议（BNEP）用于通过L2CAP传输另一协议栈的数据。主要目的是传输个人区域网络配置文件中的IP 封包。BNEP在无线局域网中的功能与SNAP类似。
6. AVCTP
音频/视频控制传输协议（AVCTP）被远程控制协议用来通过L2CAP传输AV/C指令。立体声耳机上的音乐控制按钮可通过这一协议控制音乐播放器。
7. AVDTP
音视频分发传输协议（AVDTP）被高级音频分发协议用来通过L2CAP向立体声耳机传输音乐文件。适用于蓝牙传输中的视频分发协议。
8. TCS
电话控制协议–二进制（TCS BIN）是面向字节协议，为蓝牙设备之间的语音和数据通话的建立定义了呼叫控制信令。此外，TCS BIN 还为蓝牙TCS设备的的群组管理定义了移动管理规程。
TCS-BIN仅用于无绳电话协议，因此并未引起广泛关注。
9. 采用的协议
采用的协议是由其他标准制定组织定义、并包含在蓝牙协议栈中，仅在必要时才允许蓝牙对协议进行编码。采用的协议包括：
点对点协议（PPP）：通过点对点链接传输IP数据报的互联网标准协议
TCP/IP/UDP：TCP/IP 协议组的基础协议
对象交换协议（OBEX）：用于对象交换的会话层协议，为对象与操作表达提供模型。无线应用环境/无线应用协议（WAE/WAP）：WAE明确了无线设备的应用框架，WAP是向移动用户提供电话和信息服务接入的开放标准。[7] 