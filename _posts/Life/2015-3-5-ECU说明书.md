---
layout: post
title: ECU说明书
category: life
tags: 
keywords: 
description: 
---

###ECU说明书
-----------

1.1 basic operations 基本操作

after fabricating and checking all the wiring and connection the ECU to the computer, you can carry out its basic configuration by directly modifying the parameters of the map to be loaded into the ECU.
在装配和检查所有的ECU与电脑的线路和连接之后，你可以执行它基本的配置直接通过修改要载入进ECU的map中的参数。

First of all open the PTA file by following the steps below：
首先，打开PTA文件通过下面的步骤：

click on **MAP--OPEN PTA Window** as shown in the figure below(alternatively you can directly use the command Shift+F1).
点击**MAP--OPEN PTA Window**像下图所示（另一种选择，你可以直接按Shift+F1）

At the point,all the available congiguration files will be displayed so that you may decide which file you wish to view(eg.SRB_01.pta).This is useful, for example, when different engines are controlled by different SRB ECUs from same pc, or when you wish to use different customized maps.

这时，所有可获得的配置文件都显示了出来，这样你就可以决定你需要看那个文件（譬如：SRB_01.pta）。这很有用，这在不同的引擎使用不同的SRB ECUs连接同一台电脑时，或者当你希望使用不同的自我定制的maps。

The selection window displays 4 columns:
被选的项目显示为四列

**Name:** name of the PTA file

**Format**format of the file, which can be either binary or ASCII

**Comment PTA**brief description of the file, which can be useful to recall the version or type of application for which it was created.

**Modified** date and time of last modification.

**名字**PTA文件的名字

**格式**文件的格式，可能是二进制或者ASCII

**描述PTA**对文件的简短描述，这很有用，可以显示版本或者这个文件应用的类型

**修改**最后修改的时间日期


select the desired PTA file and double_click on it. The file will be displayed in a new window as shown in the figure below.

选择需要的PTA文件然后双击，文件将在另外一个新的窗口显示出来，如下图。

different fields are include in this window.
在这个窗口有不同方面的参数


**comment**is the top left-hand part of the window. all the information written in this box is displayed in the "comment PTA"column illustrated under point 3. to view the comments, click on the "notepad" symbol which is the last button on the right of the toolbar.

**描述：** 在窗口顶部的左手边。所有的信息都写在显示为“Comment PTA”的盒子那一栏，插图在piont 3。 看描述，单击“notepad”符号，在工具栏右边的最后一个图标

**Main field** is the lower part, from which you can access all the PTA configuration fields.

这是最低的部分，从这去所有的PTA的配置部分。

from now on, this will be indicated as the base window from which you can access all the items to be configured.

从现在，这被作为最基础的窗口，可以去操作所有的配置的索引。

the chapters and paragraphs below will indicate the exact name display in the basic window and will analyse all its individual parameters.

下面的章节和段落会介绍其他的显示在基本窗口的其他名字，也会分析所有的个别的参数。
同


to modify the comments in the basic window, just click on the comment field.a cursor will be displayed and you will be able to write a customized as in any other word processing software

修改基本窗口注释内容，需要单击注释区域。光标会消失，你就可以写自定义参数像其他软件一样操作。

2. 引擎配置

the engine configuration is the first stage of the ECU programming process.it involves entering all the parameters which allow the ECU to adjust to the type of engine that needs to be configured.to configure the engine, double-click on the **"Engine Configuration"** items from the base window.according to the characteristics of the engine and the relevant components used, you can configure the flywheel used and the important engine parameters.

引擎配置是ECU编程过程的第一个阶段
它包括进入所有参数，那些允许ECU去调整的关于引擎的配置。去配置引擎，在基本窗口中双击**"Engine Configuration"**。根据引擎的特性和使用的相关的组件，你可以配置使用的飞轮和其他重要的引擎参数。

2.1 system denfinition系统定义

2.1.1 throttle/rpm or pressure/rpm

节气阀/每分钟转数 或者 压力/rpm

use this parameter to select whether to consider the various and injection maps as a function of throttle and rpm(value 0) or air pressure and rpm(value 1)

使用这个参数来选择是否考虑b不同种类的喷射maps，节气阀功能 rpm(值0) 或者压力值 rpm(值1)

2.1.2 double bank of injectors双喷头

use the parameter to select whether to use two injectors per cylinder(value 1 only if the number of cylinder is 1) or one injector per cylinder.

运用这个参数来选择每气缸是否使用双喷头（值1 表示一个气缸一个喷头）或者单喷头。

the use of 2 injectors per cylinder
does not allow the semiseyuential mode to be used(following parameter)

使用每气缸两个喷头semi（半挂车）seyuential（连续的）模式下不能使用。

2.1.3  semiseyuential（连续半挂式）

to activate the semiseyuential user mode, set this parameter to 1.the semiseyuential mode generate 2 half-time injections per engine cycle instead of a complete injection per cycle.the same takes place for ignition. two ignitions per engine cycle instead of a complete injection per cycle.the semiseyuential mode does not allow the use of 2 injections per cylinder.

激活 semiseyuential模式，设置参数为1.
semiseyuential模式产生对于每个引擎循环2个一半时间的喷射，代替了一个完全的喷射循环。
在点火是同样发生，一个引擎循环两次点火代替一个完全喷射循环。
semiseyuential模式不允许一个气缸里面两次喷射

2.2 defining the engine 最典型的引擎

2.2.1 number of cylinders 气缸数量

enter the number of engine cylinders in this field(1 or 2)
输入引擎气缸的数量 1 或者 2。

2.2.2 distribution order 分配法则

this table defines the ignition and injection order of the cylinders with respect to the TDCs(top dead center)for an engine cycle.the cylinder ignition order is given by the engine manufacturer.

这个表格定义了点火和喷射的顺序，在有TDCs的气缸里的引擎循环（上死点）
气缸点火顺序由引擎制造商提供。


2.2.3 equally spaced TDCs相同间隔的上死点

if a value other than 0 is set, the system calculates the TDCs by considering them as equally spaced.
the TDCs can then be shifted by using the parameter described in paragraph 2.2.5

如果一个值设置为除了0的数，系统计算上死点通过把他们认为是等间隔的。上死点可以被移动通过2.2.5中描述的参数。

2.2.5 TDC positions(position of top dead centers) 上死点的位置

this table defines the position of TDCs(measured in crankshaft degrees).
这个表格定义了上死点的位置（曲轴度测量）。上死点必须定义为连贯的。表格中的第一个值是第一个上死点出现在引擎循环中啮合之后。

1. 第一个上死点一般都是参考的，总是等于0度。
设定值的时候根据所使用的引擎的种类。检查数值的有效性通过将他们和引擎制造商提供的数据进行比较。

**警告：**
对于synchronization（同步性），ECU只能管理两个类型的传感器：
	- electromagnetic电磁的采样器：检测信号下降沿的位置。
	- 霍尔效应：检测信号上升沿或者下降沿
两种种类的传感器平庸地可以用在引擎上和凸轮轴通过该应用。ECU在采样时检测下降沿，具有霍尔效应的传感器来检测上升沿或下降沿。下面描述的参数根据上面提及的传感器而变化。

2.2.5 TDC1 position/Tooth N。1 上死点位置，啮合

啮合No.1 用来定义不同程度，基于不同种类的触发轮的使用。定义大方法在下表中指明。

	触发轮的类型	    |  工作模式
	对称+凸轮信号出现 |  触发轮的第一个齿是第一个被传感器检测到的
	不对称的			|  触发轮的第一个齿是第一个被检测到的普通齿 在中断之后

这个参数（测量单位：曲轴角度）用在，第一个引擎循环的上死点在第一个触发齿和不断变化的实际值不同规模TDCs作为正确的角的函数。在这个情况下，第一个上死点相位被定义为，已经被测量的轴的位置的触发齿轮点。一个肯定的参数必须被使用（例如：670度代替-50度）。这种类型的参数可以从引擎标记处找到。
consistently shifts the actual values of the various TDCs as a function of the correct angular scale 角度盘

2.3 飞轮的配置

一个正确的认真的参数关于飞轮的标定需要必要的收集，在ECU中，所有的数据都是点火时间喷油的时间安排所需要的。所有的参数被用户定义的都插图在底下。记住触发齿轮的信号收集器可能指示出smot 或者曲柄

程序界定飞轮的不同是通过是不是正常的飞轮或者一个不连续的飞轮。在实际中，如果一个正常的飞轮（叫做对称的）被使用，你需要跳过关于奇异触发齿轮的先关配置步骤的说明的段落，那些说明参数对于对称的飞轮没有用。

第二个信号现在用来同步引擎，是一个来自凸轮轴的信号，下面将被描述为cam(凸轮)。一个没有凸轮信号的配置，只可以用在如果一个触发齿轮有奇异性。

2.3.1 曲柄触发飞轮齿数

触发飞轮检测引擎速度用飞轮的齿数来标定，现实和丢失的包括其中。这个参数标定所有理论均布的齿数。举例
	1. 触发飞轮有24-2齿数有24理论齿数--参数的值就等于24
	2. 触发飞轮有4个均匀分布的齿和一个附加的齿，在两个齿之间，有四个理论齿数--参数值就等于4
	3. 一个对称触发齿轮有30个齿，有30个理论的齿---参数值就等于30。

2.3.2 丢失或者附加的曲柄齿

这个参数定义了丢失的齿数。下面的表格描述了可以被标定的值
	值		|描述
	-2		|两个丢失的齿，例如30-2teeth
	-1		|一个丢失的齿
	0		|对称触发飞轮

2.3.3 管理-1 飞轮当做对称的

这样的情况是可能的，就是认为一个触发齿轮有一个丢失的奇异齿轮当做没有奇异齿轮的正常触发齿轮的方式是设定这个参数为1。 齿转动正好在凸轮信号之后被认为是齿数1（0 度作为参考）

2.4 凸轮、曲轴信号
 
这儿 你可以详细说明正确管理触发齿轮和凸轮信号 用来正确控制引擎的时间轴。

2.4.1 凸轮 曲轴抑制时间

在触发飞轮信号第一次被检测到在SRB开始之后，或者引擎失速，你可以在顾及引擎时序之前决定等待的具体时间。 这个抑制时间也可以用在凸轮信号中。

2.4.2 开始：曲柄齿轮忽略角

为了增加抑制时间，你可以指定被忽略的曲轴齿数在引擎启动的时候。这个值是和抑制时间一起使用的，用来延迟搜索引擎时间序列的。这个只适用与曲柄信号。

2.4.3  rpm临界值来声明停转的引擎

rpm值要低于停转引擎所声明的值
**标准值为20rpm**

2.4.4 rpm临界值来声明运行的引擎

rpm值要高于引擎声明的运行和正确的同步（合拍）。这个值必须高于最小的曲柄引擎声明的临界值。

2.4.5 rpm临界值来声明曲柄引擎

rpm值要高于曲柄引擎所声明的值，这个值一定要低于运行引擎所声明的临界值。
**标准值为50rpm**

2.5 等间隔的飞轮

**警告** 这段的说明包括的内容仅仅可运用于等间隔的飞轮。不适用与丢失齿的飞轮。

2.5.1  最小凸轮位置

这个参数说明了最小百分比位置（角度窗口）在凸轮信号所声明有效的信号的2个smot齿中。如果凸轮达到一般（50%）在2个smot齿间，一个标准的值的参数设定为10%。 一个0%值，表示smot 齿先前与凸轮。

2.5.2 最大凸轮位置

这个参数说明了最大的百分比位置（角度窗口）在凸轮信号所声明有效的信号的2个smot齿中。如果凸轮达到一般（50%）在2个smot齿间，一个标准的值的参数设定为90%。 一个0%值，表示smot 齿先前与凸轮。值为100%时表明smot齿在凸轮之后。

2.5.3 最大rpm对于齿 n°检查

这个参数说明了rpm临界值低于相关检查在smot齿数和凸轮信号已经实施之后。为了确定正确的引擎同步，这里必须在凸轮信号和下一个信号之间有两倍的smot齿数。如果齿数不相配合，就会发生不同步的情况。

2.5.4 最小rpm对于整齐的检查

这个参数说明了rpm临界值高于依赖于激活的频繁暂停的同步检查。这个检查考虑信号是有效的当这个阶段在2个最后的齿有一个在75%~125%的值之间对于先前预处理阶段。对于超出范围的值来说，不同步的情况会发生。这个检查不适用于一个低rpm值导致的自然引擎acyclisms

2.5.5 最小凸轮需求

这是最小数量的可用的凸轮信号，这是必须被检测的来证实同步性和因此阶段引擎的 曲柄阶段。在最先引擎启动阶段，在处理不等的不稳定的凸轮信号提高这个值是有效的。
**标准值** 1

2.6 丢失齿的飞轮

**警告**这段介绍的仅仅适用于缺齿的飞轮，不适用于等间距的飞轮。

齿NO.1（角度参考）是奇特的第一个齿。凸轮的位置（现在）用来定义在每一个引擎的循环中能看见的2个奇特的齿，就是那个被认为是NO.1的齿。如果凸轮没有在，特别的策略被用来定义正确的角度参考对于引擎时间排序。

2.6.1 间隙的区域/有齿区域的比率

这是必须的参数对于使用ECU来同步引擎。计算这个值很简单，就是根据奇异点的比率。

奇异点比率所标称的值是通过奇异点的角度大小（就是丢失的齿）除以一个齿的角度大小。

**例子** 我们先考虑一个30-2齿的飞轮

每一个齿拥有360°/30=12°的引擎轴。结果就是：

奇异点的角度大小=（2个丢失的齿+1）*12°=36°

标准的每个齿的角度大小为12°

然后，标称的奇异点比率的值=36°/12°=3

通过标胶金属部分的公差来获得额外的关于齿的大小很难。

为了防止同步的丢失在将加速、减速和装配公差计算在内。**间隙的区域/有齿区域的比率**参数的标定必须在保障一定利润的情况下使用标称的值，在引擎运行的时候要建立一个这个环节的测量方法。例如，使用标准的值2.0

2.6.2 忽略凸轮位置

如果设置值不是0，这个参数允许你忽视凸轮校准：第一个齿紧随第一个奇异点在凸轮之后可以被认为和齿no.1一致。

2.6.3 凸轮位置/齿 N°1

这个参数（标定测量单元：曲轴角度 ）简单的设定凸轮，在触发齿轮的no.1齿之后。这个值也可以成为无效的。在凸轮比no.1齿先检测到的时候，负值被使用，当凸轮比no.1齿后检测时，使用正值。这个值的变化根据引擎，然后可以从制作商提供的技术数据中获得。


2.6.4 凸轮位置的范围

这个参数定义了凸轮临界值位置的最大错误边沿（测量单元：曲轴角度）从一个被接受的认证的位置信号。

2.7 没有凸轮的启动

用奇异点的启动齿轮的情况，你可以选择不适用凸轮来进行引擎的同步和时间的排序。

2.7.1 没有凸轮的引擎启动

这些参数是没有凸轮启动策略的

	值		| 描述
	0		|有凸轮启动
	x1		|没有凸轮启动，有rpm变化
	x2		|没有凸轮启动，有map压力信号变化
	4x		|没有凸轮启动，双点火
	8x		|没有凸轮启动 双点火双喷头

在没有凸轮启动的情况下，第一个在第一个被认可的奇异点之后的齿被叫做齿no.1，还被作为一个管理引擎的时间基础。不同的策略使你核实你的假设是否正确，否则角度的阶段被转动360°

在不同种类的map压力信号启动的情况下，这儿没有其他别的参数被配置，（map传感器必须明显地被连接和使用）。在上死点之前或之后的被读取，在不同时间管理的基本平台上，被认定是正确的或者被转动360°

2.7.2 最小rpm来检测引擎运行

多种rpm启动的情况下，（engine start without cam =x1） 这个临界值表明rpm值超过被认可的引擎的正确的同步。rpm值增加从0开始是因为时间是正确的，否则运行速度会降低。这个参数需要设定高一点相对于启动发动机的转动的速度。

2.7.3 引擎循环的同步最大n° 

多种rpm启动的情况下，**（engine start without cam =x1）**，第一个在第一个被认可的奇异点之后的齿被叫做齿no.1，而却同步开始。在被这个参数所声明的循环数量下，如果引擎的速度高于**“检测引擎运行的最小rpm”**，这个引擎不认为是正确的相位，否者相位要调整为转动360°，同步的进程重新开始。

2.7.4 在双点火和双喷头的引擎循环下的最小n° 

在双点火和双喷头启动的情况下**（engine start without cam =4x or 8x）**，这个参数表明最小的循环对于保持双点火和双喷头。一旦循环数完成，当引擎的速度超过了用下面参数定义的临界值，正确承认的相位的策略被启动。

2.7.5 rpm 用来检测相位

在双点火和双喷头启动的情况下**（engine start without cam =4x or 8x）**，这个数字表明rpm临界值低于保持的双点火双喷头的值。一旦这个的循环数完成后，当引擎的速度超过了这个临界值，正确承认的相位的策略被启动，停止双点火和双喷头然后开始标准的行动。

2.7.6 对于检测相位的引擎循环的n°

在双点火和双喷头启动的情况下**（engine start without cam =4x or 8x）**，一旦到达之前预先的临界值（循环的数量和rpm），正确承认的相位的策略被启动，（rpm 变换，如果x=1 , 有map,如果 x=2），停止双点火和双喷头然后开始标准的行动。这个参数表明，一旦认定的策略启动后，循环的数量当速度的值被发现并核实无论它增加还降低。在每一个循环里，rpm的值都和先前的循环值进行比较而且相关的数量在增加（相对于之前的数是增加还是降低）。在最后被指定了循环数量后，数量将于决定的正确的相位进行比较。在不正确的相位情况下，相位被移动360°而且同步进程重新开始。

2.7.7  认清相位

在不同rpm和双点火双喷头的情况下**（engine start without cam =41 or 81）**，一旦相位识别策略开始，在指定的循环数量之后（引擎循环n°的相位检测），数量将和定义的正确相位进行比较。如果比率在旋转增加和减少之间，计数器相较于这参数提供的指定值，相位被认为是正确的，否则相位将转360°而且同步进程要重新开始。

2.7.8 最大重试n°

在不同rpm和双点火双喷头的情况下**（engine start without cam =41 or 81）**，相位识别策略执行在这个参数下的最大时间数。如果右相位不能被找到，搜索停止然后双点火双喷头依然保持直到下一次引擎停止。

在由于smot信号问题导致的不同步的情况，双点火双喷头依然再生且保持直到下一次引擎停止。


3. 输入分配

这章描述现在各种类似的，频率或者开关传感器与ecu的通信，说明他们引脚的连接。

进行这个配置，需要在基本界面窗口上双击**“input assignment”**

3.1 频率输入

ecu可以控制三种频率的输入，两种pick up hall类型 一种hall类型。pick-up或者hall类型的使用都是根据引脚的连接。传感器的连接，遵循连线的布置。不同传感器有不同的连接方式。

3.1.1 曲柄传感器输入的选择

曲柄信号从pick-up/hall 1中读取，可以根据信号的边缘来区分（是上升还是下降）。被接受的参数值如下：

		值		| 描述
		0x00	| 默认pickup1， 下降沿
		0x01	| pick-up/hall 1 下降沿
		0x81	| pick-up/hall 1 上升沿

3.1.2  凸轮1 传感器输入的选择

凸轮信号从pick-up/hall 2中读取，可以根据信号的边缘来区分（是上升还是下降）。被接受的参数值如下：

		值		| 描述
		0x00	| 没有连接
		0x02	| pick-up/hall 2 下降沿
		0x82	| pick-up/hall 1 上升沿

3.1.3  轮速度的分配

两个可以能的轮的信号可以从pick-up/hall 2和 hall 3中读取。如果凸轮连接着的，只需要使用一个轮子的信号就好了（Hall3）。可以根据信号的边缘来区分（是上升还是下降）。第一个矢量参数表示的是前轮，第二个参数表明的是后轮。被接受的参数值如下：

		值		| 描述
		0x00	| 没有连接
		0x02	| pick-up/hall 2 下降沿
		0x82	| pick-up/hall 1 上升沿
		0x03	| hall 3  下降沿
		0x83	| hall 3  上升沿

3.2 模拟输入

ecu管理信号来自3个模拟输入。在不同的策略当中，使用的不同传感器的值，但是其中只有3个是通过SRB进行物理连接的。当传感器没有连接的时候，他们的值被认为是0，反应策略被认为是没使用。
对于模拟输入可以的选项如下:

		值		|	描述
		0		| 没有连接
		1		| 模拟1 （引脚G1）
		2		| 模拟2 （引脚F1）
		3		| 模拟3 （引脚H1）

ecu管理两个不同的温度传感器和来自NTC或者PT1000。对于温度输入可以的选项如下:

		值		|	描述
		0		| 没有连接
		1		| 温度1 （引脚B1）
		2		| 温度2 （引脚C1）

3.2.1 节流阀1 输入

选择模拟输入用于节流阀。值的变化仅运用于在关闭和打开ECU之后

3.2.2 进气 空气压力输入

选择模拟输入用于歧管空气压力（MAP）。值的变化仅运用于在关闭和打开ECU之后

3.2.3 气压的压力输入

选择模拟输入用于气压的压力。值的变化仅运用于在关闭和打开ECU之后

3.2.4 油压输入

选择模拟输入用于油压。值的变化仅运用于在关闭和打开ECU之后

3.2.5 齿轮位置输入

选择模拟输入用于齿轮连续位置。值的变化仅运用于在关闭和打开ECU之后。

3.2.6 模拟1 输入 （使用者策略）

选择模拟输入用于分出的1 模拟输入。值的变化仅运用于在关闭和打开ECU之后

3.2.7 模拟2 输入 （使用者策略）

选择模拟输入用于分出的 2 模拟输入。值的变化仅运用于在关闭和打开ECU之后


对于温度输入的可能的校准

3.2.8 温度输入#1 类型

选择温度 1 输入种类： 1表示NTC  2 表示PT1000。值的变化仅运用于在关闭和打开ECU之后。

3.2.9 温度输入#2 类型

选择温度 2 输入种类： 1表示NTC  2 表示PT1000。值的变化仅运用于在关闭和打开ECU之后。

3.2.10 水温输入 

选择模拟输入用于水温。值的变化仅运用于在关闭和打开ECU之后


3.2.11 空气温度输入

选择模拟输入用于空气温度。值的变化仅运用于在关闭和打开ECU之后。

3.2.12 氧传感器 1 输入

这有三种可能的选择对于氧传感器。

		值		| 描述
		0		| 没有氧传感器
		1		| 氧传感器连着SRB
		2		| 需要在凸轮线上 氧传感器（第一个 2个字节从ID 0x280 中获取）

关于更多的请阅读 **LAMBDA INPUT**

3.3 逻辑输入

这有三个 开/关数字输入可以配置。下面输入的描述可以从模拟或者数字输入中读取。模拟的值在之前的段落已经进行了描述。

数字输入的可能情况：

		值		| 描述
		0x00	| 没有连接
		0x0E	| 数字1 （引脚G2）
		0x0F	| 数字2 （引脚H2）
		0X10	| 数字3 （引脚J2）

3.3.1 doublemap 变化输入

选择模拟或数字输入用于map 变化。值的变化仅运用于在关闭和打开ECU之后。

3.3.2 加速开关输入

选择模拟或数字输入用于加速开关（齿轮变化描述）。值的变化仅运用于在关闭和打开ECU之后

3.3.3 pit（凹陷） 限制变化输入

选择模拟或数字输入用于pit限制的控制。值的变化仅运用于在关闭和打开ECU之后。

3.3.4 kill变换输入

选择模拟或数字输入用于kill变化（引擎停止）。值的变化仅运用于在关闭和打开ECU之后

提醒1: 确保没有重合与颠倒，不要接线错误 

提醒2： ecu高度的可自我配置情况会导致很多资源错误，仔细点，不要两个变量作为相同的输入。


4. 分配输出

一旦所有ECU输入被定义后，你必须来描述输出的特性。ECU输出（执行器命令）的可能情况总结在下表中：

		输出		|	点火		|2		线圈
				|	喷射		|2		喷射
				|	PWM		|1		低电流（最大2A）
				|	参考电压（0-5v）|2	|（每个70mA）
		其他参数 | +/- 电池电压	|  电池+/- 电压  电缆护套  连接

下面两段阐明了输出必须配置，确保引擎正确的运作。下面的段落阐明输出不是不可或缺的。通过点击**Output Assignment**来进行参数的配置。

4.1 点火线圈的输出

两个元素矢量允许在每个气缸里面进行线圈输出的配置，第一元素和气缸1相关，第二个和气缸2有关。

可能的值：

		值		|		描述
		0		|		没有连接
		1		|		点火1 输出（引脚M2）
		2		|		点火2 输出（引脚M1）

4.2 主喷嘴输出

两个元素矢量允许在每个气缸里面进行线圈输出的配置，第一元素和气缸1相关，第二个和气缸2有关。在双喷嘴的情况下（例如：一个气缸），第二个参数就和气缸1相关。


可能的值：

		值		|		描述
		0		|		没有连接
		1		|		喷嘴1 输出（引脚L2）
		2		|		喷嘴2 输出（引脚L3）

4.3 燃油泵输出

可能的值：

		值		|		描述
		0		|		没有连接
		7		|		喷嘴1 输出（引脚L2）
		8		|		喷嘴2 输出（引脚L3）
		15		|		点火1 输出（引脚M2）
		16		|		点火2 输出（引脚M1）
		23		|		pwm输出（引脚K1）

4.4 报警灯输出

报警至少灯可以用作：当实际的值到达了临界值灯就亮起了。报警灯可以是灯或者LED，如果是个数字应用，它可以分配几个输出参数，值如下：

		值		|		描述
		0		|		没有连接
		7		|		喷嘴1 输出（引脚L2）
		8		|		喷嘴2 输出（引脚L3）
		15		|		点火1 输出（引脚M2）
		16		|		点火2 输出（引脚M1）
		23		|		pwm输出（引脚K1）

提醒：点火和喷射输出用于引擎管理，可用的输出是PWM输出。

4.5 转速表输出

这个参数 仪表板转速表

可能的值：

		值		|		描述
		0		|		没有连接
		7		|		喷嘴1 输出（引脚L2）
		8		|		喷嘴2 输出（引脚L3）
		15		|		点火1 输出（引脚M2）
		16		|		点火2 输出（引脚M1）
		23		|		pwm输出（引脚K1）

4.6 氧传感器 加热器输出

参数  氧传感器 加热器控制（用于氧传感器直接和SRB相连）

可能的值：

		值		|		描述
		0		|		没有连接
		7		|		喷嘴1 输出（引脚L2）
		8		|		喷嘴2 输出（引脚L3）
		15		|		点火1 输出（引脚M2）
		16		|		点火2 输出（引脚M1）
		23		|		pwm输出（引脚K1）

4.7 PWM 1 /Output 1

可能的值：

		值		|		描述
		0		|		没有连接
		23		|		pwm输出（引脚K1）

5. 配置执行机构

当ECU的输入和输出都标定完毕，所有连接ECU的输入输出的特性要被记录。
双击**”Actuator Configuration“**

5.1 点火线圈

5.1.1 线圈 圈住

RPM功能的点火线圈暂停时间。值必须以毫秒传输，这特性对于每个线圈都不同。

5.2 喷嘴 

5.2.1 主要喷嘴dead time

遵循驱动电流控制喷嘴的延迟，毫秒传输， 这靠电池电压来决定

5.2.2 第二喷射dead time

for 第二喷射  这靠电池电压来决定

5.2.3 主bank的最小喷射时间

如果喷射时间ECU计算的 低于这个等级，喷射将不会发生。

5.2.4 第二bank 最小喷射时间

低于第二个bank

5.2.5 主bank 喷嘴流速

传输 cc/min

5.2.6 第二bank 喷嘴流速

第二bank  传输 cc/min

6. 附加调节

双击**Environment**

6.1 齿轮位置

输入齿轮位置  包括空挡 和 倒档（最大值9）

6.2 cc diag 临界值，对于线圈（临界值： s/c）

在ms中最小的值从开始点火命令到4.5A。如果时间低于这个临界值，短时间的线路诊断在线圈上的已经被激活。在标准的工作情况下，标准到达4.5A的时间为200微秒。临界值必须设置为一个低一点的值（例如30微秒）

6.3 消耗调整因素

这个参数对于进行一个精确的燃料消耗的估计是有用的，因为它允许你弥补任何ECU在计算燃料喷射量时所犯的错误。由于配合间隙和宽容度以及惯性的影响在喷射的开始和结束的工程中，精确的燃料喷射量将轻微的有别与理论的值。因此，假如引擎消耗一公升的燃料，ECU将计算为已经消耗的，例如1.2升。对精确消耗的值和ECU计算出的消耗的值相比较，你接受这个参数。这个值也取决于使用的燃料的比质量（质量密度）。

建议你通过测试来决定这个值。

6.4 断点边缘   电位器 desk

当mapping进行是使用电位器desk(AMC6),这个参数帮助你指定从一个map的cell到下一个的边缘。举个例子，当你超过相关断点的10%的时候，你使用10%的值从一个移动到另外一个，最大值就是50%。


7. 断点的定义

ECU工作在一个map的使用，其是有一个或更多的测量的值，以及一个或更多要作为ECU输出的值。举个例子，点火的map,最先从rpm的值和获得的节气阀的位置，通过一个表格，预先的值。 在表格中的值是对于完全指定的点唯一标定的，叫做断点，在整个运行的工程中。对于在两个断点中间值，ecu将通过计算来获得值。

断点的数量可以更改以及他们的值可以随意设定，所以可以随意的分配这些点。例如，在一个极其敏感的运行环境中，你可以多设置断点来获得更好的精度，然后分散其他的断点在剩下的领域。

主要：如果断点的数量改变了，所有相关的maps必须调整。如果你希望使用少量的断点来代替改变参数值，你可以重复最后有用的值来增加断点。这样，不同的maps的规模才可以保持。

设置不同种类的断点在下面阐明，有些数量需要高精度的就需要长map(有更多的断点)，有些低精度的就需要段map(少量的断点)

调整参数  双击**“Breakpoint Definition”**

7.1 引擎速度

一个有最多24个断点的表格 被定义为**“RPM Breakpoint Short”**

一个有最多36个断点的表格 被定义为**“RPM Breakpoint Long”**

对于两个表格，你都需要设置最大值通过**“Nubmer of RPM BP short”**   **“Nubmer of RPM BP Long”**，断点的值必须传递给rpm.

7.2 节流阀

节流阀也支持两个表格，一个短的有5断点，被定义**“Breakpoint(Throttle，short table)”**  长的有24个断点，被定义为**“Breakpoint(Throttle)”**。在两个表格，节流阀的位置都必须转换为节流阀角度的百分比。你可以设置长表的最大值通过**“Number of breakpoint[Throttle]”**

7.3 进气压力

进气压力有24个断点，被定义为**“Breakpoint （Inlet Air Pressure ）”**。这个值被转为mbar。你可以设置最大值通过**"Number of breakpoints(Inlet air pressure)"**

7.4 气压

气压有5个断点，被定义**“Breakpoints(Barometric pressure)”**
值被转换为mbar

7.5 水温

有24个断点， 定义为**“Breakpoints(water)”** 值被转换为摄氏度。可以设置最大值通过**“Number of breakpoints(water)”**

7.6 空气温度

24个断点  定义为**“Breakpoint（Air）”**  值被转换为摄氏度，可以设置最大值通过**“Number of breakpoints(Air)”**

7.7 实际的断点

最后的五个矢量使用提供的可见的值，通过其他ECU上的maps的使用的相关的值，没有在实际使用中计算

建议不去修改这些值。

8. 通信

通过can总线和外部设备进行通信

双击**“Communication”**进行调节

8.1 can总线波特率

使用这些参数来设置波特率

		值		|	描述
		500		|  500kb/s 波特率
		1000	|  1Mb/s 波特率（默认）


8.2 外部数据记录器

8.2.1 选择外部can总线数据记录器

这个参数定义外部数据记录器通过SRB ECU 连接的存在

	0		|	不适用外部数据记录器
	1		| 使用can总线传输包连接外部数据记录器

8.2.2 can总线包

这些数据是通过CAN总线传输的，也就是当做外部数据记录器的输入

	值	|	形式		|CAN id		|位数	|	线性化补偿	| 线性化得到
	RPM	 |   uword    |(0x200,0)  |0	|	0			|  1
    节气阀|   word    |(0x200,2)	|1		|	0			|  0.1
	pair	|   word   |(0x200,4)	|0		|	0			|  1
	pbaro(p大气压)	|   word   |(0x200,6)	|0		|	0			|  1
	QInj |   uword   |(0x204,0)	|0		|	0			|  1
	TInjH|   uword   |(0x204,2)	|3		|	0			|  0.001
	TInjL|   uword   |(0x204,4)	|3		|	0			|  0.001
	ADV|   word   |(0x204,6)	|1		|	0			|  0.1
	Adv base|   byte   |(0x208,0)	|1		|	0			|  0.1
	MapSw|   ubyte   |(0x208,1)	|0		|	0			|  1
	Dwell|   uword   |(0x208,2)	|3		|	0			|  0.001
	Lim_ign|   uword   |(0x208,4)	|0		|	0			|  1
	Lim_inj|   uword   |(0x208,6)	|0		|	0			|  1
	syncstate|   uword   |(0x20C,0)	|0		|	0			|  1
	poil|   word   |(0x20C,2)	|3		|	0			|  0.001
	
	.....

8.3 使用者包传输

可以传输3个以上的包 通过can总线 以50Hz的频率，使用配置的ID和内容

8.3.1 can标示符

这个参数允许你输入can包的id来进行传输（以16进制的形式）

8.3.2 使用者的can表格

使用这个参数来标定你需要传输的管道。表格中的每条线代表一个包。

每个元素用来标定传输的管道。前三个字节表明储存管道的地址，或者是你可以传输的管道的相关列的地址（CLL文件），然后第四个字节(最小的标志)表明你传输的字节的长度。（例如：2表明一个字被传输）。每个值都是以十六进制的格式传输的。举个例子，用值：0x000071**02**，你传输的管道是CLL的0x000071（管道113）传输两个字节。

注意：包传输模式的使用，仅仅针对专业用户，拥有CLL表单的途径。

9. 输入定义

下面的段落如何配置输入和ECU相连的。如果传感器没有和ECU相连，你可以避免对复杂参数的配置 保持他们的默认值（他们没有使用）

9.1 引擎速度

双击**“Speed Engine”**

9.1.1 过滤

9.1.1.1 RPM过滤角度

角度超过引擎速度被过滤去获得更稳定的rpm值，最大值支持720°。

9.1.1.2 RPM派生的过滤

这个是rpm派生的IIR过滤的系数。这个值必须在0~1之间，0表示很强的过滤，1表示没有过滤。

9.1.2 转速表

9.1.2.1 脉冲转速计位置

这个表格定义了信号波形送给转速表。输入的值，表示到曲轴角度，表明这个值ecu信号换向从H到L值以及反之亦然。

使用值-1 表示信号从开始位置开始。

根据构造器，脉冲转速器需要接受一个特定的转向（脉冲）的数量对于每个引擎的运转。下面的例子展示了如何设置在实际的例子中。

例如，考虑一个转速计，联系4脉冲至两曲柄的旋转。

将表格用图标形式展示，你获得一个类似插图，如上图。这样你可以看到，四个脉冲与两曲柄的旋转联系起来（引擎循环）

9.2 轮子速度

双击**“Wheel Speed”**

9.2.1 轮子配置

9.2.1.1 轮子齿数

为了配置轮子速度传感器，你必须确定触发轮的齿数。SRB允许你在两个轮子上适配不同的齿数。

9.2.1.2 轮子周长

使用只怪参数确定前后轮的旋转周长，mm为单位

9.2.2 配置车辆速度

正确的车辆速度可以被决定根据个体轮子的速度，取决于车辆使用的种类，在实际中他是全轮后轮驱动或者四驱。通过SRB你完全自由地决定怎么计算正确的车辆速度。

9.2.2.1 车辆速度的选择


在计算每个车轴的速度之后，车速必须被确定。为了这个目的，这有集中可被选择的选项，这些选项可以通过设置参数值一个合适的值。

		值		|		计算方式
		0		|		前轮速度
		1		|		后轮速度
		0x80	|		前轮速度为0时的后轮速度
		0x81	|		后轮速度为0时的前轮速度

9.2.3  过滤轮

9.2.3.1 车速 齿轮过滤

使用这个参数来设置齿数，那些超过计算过的每个轮的平均速度。如果数值是0，速度就没计算过。

9.2.3.2  车速过滤系数

这是IIR轮速过滤的系数。这个值必须在0~1之间。 如果值接近0表示强有力的过滤，如果值等于1表示没有过滤。


9.2.4  诊断/恢复

9.2.4.1 轮诊断速度临界值

速度临界值超过那些决定轮子正确运转的计算值。

9.2.4.2 最小速度的rpm

这是计算出来的最小的RPM临界值。如果rpm低一点 ，轮子就被认为是稳定工作的。

9.2.4.3 Delta 轮子诊断的平均速度

这是最大可接受的速度delat，关于两个轮子的平均速度。如果单个轮子的速度低于平均的速度，在这方面的差别，传感器被认为出错了。


9.2.4.4 轮速度最大值

这是速度的临界值 超过传感器认为出错时的值。

9.2.4.5  delta 轮子速度

最大可接受的速度delta,在现在和之前的例子。如果现在单个轮子的速度比之前例子的大，传感器认为是错误的

9.2.4.6 轮速度到错误的时间

这个是时间长度，速度传感器必须持续引起一个错误来引发诊断。

9.3 节流阀位置

双击**“Position:Throttle”**

9.3.1 学习功能

节流阀的学习功能通过函数激活，不是通过PTA运作的。它的执行是通过传统节流阀用机械电缆操作。选用这个学习功能，从输入配置页的函数到节气阀窗口。

设置节气阀至最小值，选择**节气阀学习**频道，选择最小值，从drop-down菜单中。

重复相同的动作来设置最大值。设置节气阀的最大值，选择**“Throttle Learn”**管道  选择最大值从菜单中。

使用值包括在**“Learning Position Min”**和**“Learning Position　Max”**参数中，这些与节气阀最大最小的物理位置相符合，ECU计算出线性传感器的增加和补偿值，然后自动存储。（你再也不用设置**“Throttle sensor gain”**和**“Throttle sensor offset”**参数）。查看已经通过ECU计算出来的的值，高亮**“Throttle sensor gain”**和**“Throttle sensor zero”**参数然后按下F6。

9.3.2 线性

自动学习的替代品，你可以直接设置**“Throttle sensor gain”**以及**“Throttle sensor zero”**的值，来转化为输入信号的电压值给节气阀引擎值用百分之表明。（或者角度值）用在不同的策略上。

9.3.3 诊断

如果节气阀输入信号所需要的值在V（如果连接起来）他超出了**“Min Throttle Input Threshold”**和**Max Throttle Input Throttle**定义的范围，而且长于**“Diagnostic confirmation time(ms)”**，节气阀被认为在诊断，引擎的值被是指为0%


9.4 齿轮位置

双击**“Position： Gearbox”**

9.4.1 传感器类型

你可以连接两种不同的桶传感器与SRB ECU 连接来检测齿轮的位置。在实际中，以可以使用一种电位计或者一个n位置旋转体。选择传感器，可以使用**“Type of barrel sensor”**参数来修改。输入0表示使用的是电位器，输入1表示使用的是n位置旋转体。


9.4.2 诊断

9.4.2.1 最小齿轮位置输入临界值

最小齿轮位置传感器值在V中 低于在诊断中所设定的传感器值，齿轮位置值被设定为**“Default Gear Position”**。

9.4.2.2 最大齿轮位置输入临界值

最大齿轮位置传感器值在V中 低于在诊断中所设定的传感器值，齿轮位置值被设定为**“Default Gear Position”**。

9.4.2.3 默认齿轮位置

这是传感器被认为要诊断的值

9.4.2.4 Ascii 齿轮位置

这个表格联想了使用的齿轮的值，用ASCII形式。在每一个齿轮传感器的断点上。断点的表格默认定义为从N， 1...6或者7。然而，这个顺序也是可以修改的，可以用到特殊的传感器上或者在特别的配置的情况，例如 摩托车的齿轮。

9.4.2.5 默认齿轮的仪表盘显示种类

如果齿轮传感器在诊断中，齿轮的值被送给仪表盘，可以从**“Ascii Gear Position”**表格获取，**“Default Gear Position”**（参数值不同于0），或者从**“Default Dashboard Ascii Table”**矢量（参数值设置为0）

9.4.2.6 默认仪表盘Ascii板

在诊断是将齿轮的值送给仪表盘。第一个元素被用在当传感器的值超过了特定的范围时，第二个是传感器在一个不明确的位置。

9.4.3 齿轮位置处理

9.4.3.1 齿轮位置断点

**“Gear Position Breakpoint”**表格包括9对电压值（最大值和最小值）定义稳定的不同类型齿轮位置传感器的稳定电子位置。在这个配置表中，你应该遵守下面的规范：

		- 每一对值必须遵循一种电压增长顺序
		- 每一对必须不和另外一对参数重叠
		- 不使用的齿轮位置必须赋值0.0000v（或者5.0000v）
		- 两对值之间的自由间距要符合在没有决定的齿轮位置 

确保齿轮的位置，电子值和ASCII 齿轮位置表格想符合。

9.4.3.2 齿轮位置超时

如果齿轮的位置在一个没有决定的地方有一段时间长与定于的**“Gear Time Out”**，传感器被认为在诊断中，齿轮值被设置为**“Default Gear Position”**

9.5 空气进气管压力（MAP）

双击**“Pressure： Air Intake”**

9.5.1 线性和过滤

在进气总管中配置空气压力传感器，你需要两个传感器使用的特性参数：假定的电压值，由传感器输出提供，是在0mbar压力下被设置在**“Intel Air Pressure zero”**的参数中，以及传感器获得的转换为mbar/v的设置在**“Inlet Air Pressure gain”**。

压力值通过一个IIR过滤器进行过滤，系数被设置在**“Inlet Air Pressure fliter”**(值接近0表示强过滤，接近1表示没有过滤)

9.5.2 诊断

进气空气压力输入信号获得的值（在v中），如果连接了，为了确定他的可靠性，将他和参考的值进行测试。如果值超出了定义的限制**“Min Air Pressure Input Threshold”** 和**“Max Air Pressure Input Threshold”**。错误在合适的诊断指示器中表现，默认压力值等于假设值1000mbar


9.6 气压压力

双击**“Pressure：Barometric”**

9.6.1  线性和过滤

配置气压压力传感器（如果安装了），你需要两个传感器使用的特性参数，由输出传感器在0mbar的压力下输入给**“Barometric Pressure Zero”**的假设电压值以及传感器或者转换为mbar/v的输入给**“Barometric Pressure Gain”**的值。

这个压力值通过IIR过滤器过滤，系数被设置在**“Barometric Pressure filter”**(0强  1 弱)

当引擎关闭传感器被读入。在引擎运转时读取值，你必须设置**“Baro Pressure When Engine Turning”**参数为1

9.6.2 诊断

空气压力输入信号获得的值（在v中），如果连接了，为了确定他的可靠性，将他和参考的值进行测试。如果值超出了定义的限制**“Min Baro Pressure Input Threshold”** 和**“Max Baro Pressure Input Threshold”**。错误在合适的诊断指示器中表现，默认压力值等于假设值1000mbar

9.6.3 空气压力读入

当空气读入压力没有展示，你可以通过空气压力传感器读取压力值（如果存在且没有在诊断中）

如果引擎速度低于**“Pbaro RPM threshold”**值和节气阀高于**“Pbaro throrrle threshold”**值，和这两个情况相遇 长于**“Pbaro Stabilization Time”**值，气压压力读书来自于空气压力。

9.7 油压

双击**“Pressure:Oil”**

9.7.1 线性和过滤

9.7.2 诊断

9.8 水温

双击**“Temperature：Water”**

9.8.1 NTC 传感器  和过滤

如果你使用一个Ntc传感器，在**“NTC linearization table(water)”**表中，你需要输入使用的NTC传感器的线性表格，那些制造商所使用了的。在这个表格，你必须声明传感器的阻力，转换为ohm,随着温度变化的，每10摄氏度，在-40到190之间内。

温度值通过IIR过滤器过滤，系数设置**“Water temperature filter”**(0表示强烈过滤，1表示不过滤)

9.8.2 诊断

以ohm形式的水温输入信号需要的值，要和保证可靠的参考值进行测试。如果值超过**“T_water min electrical threshold”**和**“T_water max electrical threshold”**定义的限制。一个错误报告在合适的诊断表明以及假设默认温度值是30摄氏度。

9.9 空气温度

双击**“Temperature Air”**

9.9.1 NTC传感器和过滤

如果你使用一个Ntc传感器，在**“NTC linearization table(air)”**表中，你需要输入使用的NTC传感器的线性表格，那些制造商所使用了的。在这个表格，你必须声明传感器的阻力，转换为ohm,随着温度变化的，每10摄氏度，在-40到190之间内。

温度值通过IIR过滤器过滤，系数设置**“air temperature filter”**(0表示强烈过滤，1表示不过滤)

9.9.2诊断

以ohm形式的空气输入信号需要的值，要和保证可靠的参考值进行测试。如果值超过**“T_air min electrical threshold”**和**“T_air max electrical threshold”**定义的限制。一个错误报告在合适的诊断表明以及假设默认温度值是30摄氏度。

9.10 lambda氧传感器 输入

氧传感器可以连接SRB或者通过CAN总线获得（在3.2.12中解释过）。选择**“Lambda Input”**参数（输入分配群）和设置下面其中一个值。

		值	|	描述
		0	|	没有氧传感器
		1	| 	内部传感器
		2	|	来自CAN包 ID0x280的传感器，前两个字节

关闭后再开启ECU，改的值才能应用。

双击**“Lambda Input”**来调整氧传感器

9.10.1 氧传感器配置

从CAN总线接受的值读取后，线性化后获得最终的氧传感器值。**“Lambda sensor value from”**参数被用来表明接受的值的形式。

被接受的值为:

		值	|		描述
		00	|		A/F 值（*1000），已经修改了的
		01	|		mV 值转换成氧传感器的（1.0）
		11	|		mV 值转换成A/F

如果已经转变为氧传感器的或A/F ，过滤就被执行。

9.10.2 氧传感器输入过滤器

氧传感器通过IIR过滤器过滤，系数设置通过**“Lambda input filter”**
,值的范围从0.004（最大过滤）到1（没有过滤）

9.10.3 氧传感器输出类型

使用这个参数来啊配置氧传感器的输出类型，当他直接连接到SRB上。

可能的值有：

		值	|		描述
		0	|		电压
		1	|		空燃比（A/F）
		2	|		丰满度（1/(A/F)）
		3	|		氧传感器
		4	|		ip

9.10.4 氧传感器类型

定义了直接和SRB相连的传感器的类型

		值	|	描述
		0	|	NGK LZA03
		1	|	BOSCH
		2	|	NGK LZA08

9.10.5 氧传感器电阻排版

这个参数定义了电阻补偿，氧传感器直接和SRB相连，为了读取正确的线性值。

9.10.6 加热控制

你可以管理氧传感器加热器通过使用特定的输出，用**“Lambda Heater Output”**参数在OUTPUT ASSIGNMENT 组中（看4.6）。使用这个的可能输出是：INJ1,INJ2,IGN1，IGN2，LOW Side1。

使用**“Temperature Control type”**参数来定义什么类型的控制，使用在控制连接SRB的氧传感器的温度。

可接受的值是:

		值	|		描述
		0	|		关闭的回路
		1	|		关闭
		2	|		开启回路临时感应

如果关闭回路的模式使用了，你必须通过**“Target temperature”**参数定于目标温度。

如果你使用了开启回路模式，你必须定义责任循环运用到加热输出中通过**“PWM Open Loop”**参数。

加热器启动在引擎旋转超过临界值后，临界值通过**“Rpm threshold”**参数定义，在一段时间之后，通过**“Rpm Timeout”**定义的。 

9.10.6.1 Pwm百分比  在加热器SC之后

通过一个短循环诊断在输出，与氧传感器加热器相联系的，输出已经关掉一次，之后，责任循环值重启从作为产品的计算的值，在最后责任循环值之间，在短循环和在参数中设置的百分值。

在氧传感器加热的时间，假的短循环导致低传感器阻力，当检测到变冷时。

9.11 电池电压

双击**“Battery Voltage”**

9.11.1 过滤

通过IIR过滤器进行电压过滤，系数设置在**“Battery voltage filter”**(0强过滤，1没有过滤)

9.11.2 诊断

测量电池电压值是比较最小可接受电压**“MIn VBatt Input Threshold”**。如果测量的值低于这个值，引擎的速度高于**“Vbatt RPM Threshold”**,错误会在相关的诊断器中显示出来。

9.12  关闭引擎

通过设置**“SWitch：kill engine”**参数至1，你停止点火和喷射系统，这导致引擎停止。这种模式对于引擎测试很有用，因为他允许你突然关闭通过软件。这个参数在关闭ECU之后还是存在的。当你打开引擎时，你必须设置参数为0.

**在标准情况下，设置这个值为0**

9.13 关闭转换

双击**“Switch：kill”**

**“sw kill level on definition”**参数定义电子等级回馈运动状态（ON）。如果写入0，ON状态被设置，如果这里有0电压在输入等级中。如果写入1，相对的，ON状态被设置，如果VREF在输入等级中。如果一个模拟输入被选中，逻辑通信等级设置为内部2.5伏。

在改变状态的情况下，电子等级必须保持稳定，对于大量时间通过**“SW Kill confirm state time”**定义，为了新状态的有效使用。


9.14 进站限速

双击**“Switch： Pit Limiter”**

**"SW pit limiter level ON definition"**参数定义电子等级回馈运动状态（ON）。如果写入0，ON状态被设置，如果这里有0电压在输入等级中。如果写入1，相对的，ON状态被设置，如果VREF在输入等级中。如果一个模拟输入被选中，逻辑通信等级设置为内部2.5伏。

在改变状态的情况下，电子等级必须保持稳定，对于大量时间通过**“SW Kill confirm state time”**定义，为了新状态的有效使用。

9.15 上限值

双击**“Switch Upshift”**

**“SW upshift level ON definition”**参数定义电子等级回馈运动状态（ON）。如果写入0，ON状态被设置，如果这里有0电压在输入等级中。如果写入1，相对的，ON状态被设置，如果VREF在输入等级中。

如果模拟输入选中，逻辑同学等级设为为**“SW upshift analog Threshold”**

在改变状态的情况下，电子等级必须保持稳定，对于大量时间通过**“SW upshift confirm state time”**定义，为了新状态的有效使用。

9.16 双MAP 变换

双击**“switch： double map”**

**“Sw double map level on definition”**参数定义电子等级回馈运动状态（ON）。如果写入0，ON状态被设置，如果这里有0电压在输入等级中。如果写入1，相对的，ON状态被设置，如果VREF在输入等级中。如果一个模拟输入被选中，逻辑通信等级设置为内部2.5伏。

在改变状态的情况下，电子等级必须保持稳定，对于大量时间通过**“SW double map confirm state time”**定义，为了新状态的有效使用。

10. 开始参数

SRB ECU可以在低电量的情况下工作，这要求他可以在最少的可能时间启动，保证启动引擎的过程。

为了最优化启动时间，一些关键的参数已经被包含在**“INITIAL PARAMETER”**组，增加给输入，输出和引擎参数。

这些参数使用在前两秒在ECU上电之后，随后，SRM自动地过度到不同种类的map参数。

双击**“Initial Parameters”**

10.1 点火

使用**adv.map inital**参数来标定点火提前值（转化为角度），ECU将启动从前两秒从上电后。

圈住时间使用前两秒从ECU上电，被设置为**“Coils Dwell Initial”**参数。

10.2 喷射

一系列喷射使用前两秒自从ECU启动，转换使用**“inj.map”**参数，以及读取从水温传感器的Ohm值的功能。使用**“Bkp Ohm water temp”**参数来键入水温断点在Ohms,为了使用定义一系列的油被喷射。

喷射阶段值使用在ECU启动的前两秒，被设置通过**“Injection Phase Main”**参数。

使用**“Max inj fuel on tooth”**参数来指定最大喷射量超过转变使用喷射在每一个齿来标准连续的喷射模式（看14）

10.3 喷射参数

喷射参数（截止时间）通过**“Initial main bank Injector Dead Time”**和**“Initial Secondary Bank Injector Dead Time”**参数来指定，两个都是转换为毫秒。

11. 限幅器的策略

安全函数可以被实施通过SRB，在下面描述。他们包括点火和喷射cut 函数为了阻止引擎失效。

双击**“Limiters”**

11.1 限幅器

11.1.1 点火速度限幅器

你可以设置引擎速度在**“Ignition Speed limiter”**参数之上。这个值是一个绝对的限制，它不能被其他map压倒。但是它可以减少通过一个三角洲，最为齿轮位置功能和它可以优于“soft-cut”限制控制。

这个观念将在“prelimiter”选项中进行更详细的阐明。

11.1.2 喷射速度限幅器

你可以设置转动速度在**“Injection Speed limiter”**参数之前，这组参数适用于喷射限制，和这组用做点火限制的相类似。


11.1.3 三角洲限制 f(齿轮)

完全的限制器，可以区分每一个使用中的齿轮通过**“Delta limiter f(gear)”**参数。完全限制器的补偿可以指定当做齿轮位置的功能。如果齿轮变换传感器不在，只有第一个参数的矢量被使用。这些参数组成的关于限制值的公式如下：

**Limiter Threshold=Limitater-DeltaLim（Gear）**

**Limiter Threshold：**通过计算并最后用于SRB的最终的限制值

**Limiter:** 限制值 在上面段落里面定义的

**DeltaLim（Marcia）**通过齿轮 在**“Delta limiter f（Gear）”**表格中萃取出来的。

11.2 软件限制

软件限制板块（齿轮位置函数的一个值）被分为4个相同RPM板块，通过先进裁剪长度和直接转换为rpm。

RPM板块定义“软件”限制等级对于每一个齿轮（先进的裁剪 20%，40%，60%，80%的气缸，发生在旋转，以至于避免一直裁剪相同的气缸）。

11.2.1 点火速度限制板块 f(齿轮)

你可以输入点火前端限制板块，在当做齿轮位置函数的点火限制器。这个板块可以在**Ignition Speed Limiter Band f(Gear)**表格中被定义。通过说明rpm值的期望值。如果齿轮传感器不存在，第一个矢量的参数被使用。

点火前端限制在旋转速度开始工作的公式说明如下：

**Prelimiter=Ignition Limiter Threshold-band f(Gear)**

**Limiter Threshold：**在**Delta Limiters**段落值计算的

**Band f(Gear):**在**“Ignition Speed Limiter Band f(Gear)”**表格中输入值。

11.2.2 喷射速度限制板块 f(齿轮)

相似的，你可以定义喷射前端限制器，这个板块可以在**Injection Speed Limiter Band f(Gear)**表格中定义用rpm。如果齿轮传感器没有，第一个矢量的参数被使用。

喷射前端限制器在旋转速度开始工作的公式说明如下：

**Prelimiter=Injection Limiter Threshold-band f(Gear)**

**Injection Limiter Threshold:** 在**Delta Limiters**段落值计算的

**band f(Gear):** 在**Injection Speed Limiter Band f(Gear)**表格中输入。

看限制器和软件限制器作用，看下面的图：


11.3 进站限速

进站限速允许车辆保持常数最大速度

11.3.1 最大车辆速度

设置你想保持的速度，一旦你按下进站限速转换，你必须设置KM/h的值在**“Max vehicle speed”**

11.3.2 进站限速器种类

**SRB**ecu允许你选择cut的进站限速器的模式通过**“Type of pit lane limiter cut”**。可选的模式在下表中显示

		值	|	cut类型
		00	|	没有减速的cut
		01	|	点火cut
		02	|	喷射cut
		03	|	点火喷射cut

11.3.3 默认齿轮位置

你可以设置进站限速的默认齿轮（1...6或者7）通过使用**“Default Pit Lane Gear Position”**参数。这是很有用的，如果齿轮传感器不在或者在诊断中。

11.3.4 车辆速度到达1000rpm, f（gear）

在**“Vehicle Speed at 1000rpm f(Gear)”**表格中，你必须表明车辆速度达到1000rpm在每一个齿轮。这个值被用来寻找rpm限制需要来保持下面的定义的速度。

11.3.5 进站限速 输入时间

你可以设置一系列时间在在之前段落定义过的标准的进站限速变化值到需要保证默认速度的值，而且避免突然减少的限制器。这个值转换为ms,必须被输入进**“Time Pit Limiter entry (on)”**

11.3.6 进站限速 离开时间

相同适应，进站限速离开，允许限制器渐渐的从在进站限速的值慢慢转到标准值。这个值转换为ms,必须被输入进**“Time Pit Limiter entry (off)”**

这内容在下面的图中清楚的阐明

12. 点火策略（点火提前）

点火策略关系的是点火提前值的管理，当引擎工作环境变化。简单的点火提前map,一系列的正确的参数对于获得更好的有用的引擎运转情况，列入考虑的范围内。

双击**“Ignition(spark advance)”**

12.1 基于3D先进 map  f(Rpm/Thr./SWMap)

提前点火定义关于RPM/Throttle Position/double map switch position的函数。提前点火值转化为曲柄变化角度，作为RPM和节气阀位置的函数， in百分比。

在这个中，你可以定义两个不同的map,这样能激活使用双map转换。双map转换的位置由图形的Z 轴决定，而且两个可用map之间的交换。如果双map转换不存在，第一个map是激活的一个。但是，在这种情况下，这样比较安全，复制相同的map到ECU可用的两个内存位置中，以至于避免任何电子干扰从引起的问题。提前点火map能以图形或者图标的形式。为了显示表格，双击**“Base 3D adv.Map f(RPM/Thr)”**

为了显示3D图形，**“不要关闭”**表格然后选择最顶端的菜单**“Map--graph mode 3D”**。一个窗口显示3D图形将被打开。这方面，你可以随意旋转map，以至于识别任何关键的map区域凭直觉，有可能性来直接改变从图形界面，通过简单的选择和改变不同的点在map上。

下面的图片展示一个例子表格紧接着3D图形。如果一个点在选择的图形中，相同的点被着重显示，反之亦然。被选中的点通过红色的点在图形上显示出来，在黑色背景的表格的盒子。在窗口上右边顶部的角落，连接到图形，你可以选择是否显示map1或者map2（看红色的圆在图下面）分别通过设置参数值从[1]或者[2]。选择的map将被显示图形和表格中。

改变基本的提前点火值，为了获得引擎最合适的运转，你可以简单地改变图形，通过拖动（左键在拖拽）点你想改变的，从最上面到底端通过鼠标。这个值将迅速的改变在表格中，就像下面的图显示。

这非常快和用户友好的方法，但是它可以产生问题当细节的调整，这样建议您通过表格直接改变。在想要修改的框中双击来改变默认的值，图形将自动地改变。这两个方法是等价的。

一些正确的参数根据引擎的运转条件而定，例如温度压力的值，将会加到这个基本的图当中。下面表明所有的变量通过他们的名字。他们是独一无二的参数，及时他们不容易使用，他们避免混乱和多项指代。

**注意1:**如果空气压力的函数被使用你（2.1.1），你必须使用**“Base 3D adv map f(RPM/Inleto/SwMap)”**双重map,使用空气压力代替节气阀。这个考虑在这里应用。

**注意2：**所有下面的正确的参数都是附加的类型。这意味着，举个例子，在图形中一个值等于-6°，将减少提前6°，就是一个值等于+6°将增加6°。一个等于0的值不等导致在值上的任何改变。

12.2 提前点火改正，根据空气温度函数

这个更正作为空气温度的函数，**“kaTair”**，作为附加的提前点火的更正，转化为机轴角度，而且从**“Advance Correction f(fair)”**map中获得作为温度的函数用摄氏度。你可以在表格中设置值，所有的插入节点，ECU可以修改来保证获得最后正确的值。

12.3 提前点火改正，根据水温函数

这个更正作为水温度的函数，**“kaTwater”**，作为附加的提前点火的更正，转化为机轴角度，而且从**“Advance Correction f(twater)”**map中获得作为温度的函数用摄氏度。你可以在表格中设置值，所有的插入节点，ECU可以修改来保证获得最后正确的值。

12.4 提前点火改正，根据气压函数

这个更正作为气压函数，**“kaPatm”**，作为附加的提前点火的更正，转化为机轴角度，而且从**“Advance Correction f(pbaro)”**map中获得作为温度的函数用摄氏度。你可以在表格中设置值，所有的插入节点，ECU可以修改来保证获得最后正确的值。

12.5 全局改正

作为附加的提前点火的更正，转化为机轴角度，而且从**“Global Advance Correction ”**map中获得。这个参数可以在增加之后被使用，或者从全局map中移除，迅速提前。不需要重新定义从点到点。


12.6 独立的气缸的更正

附加提前点火的更正，转换为引擎轴的角度，从**“Advance Correction:CYL1 ”**和**“Advance Correction：CYL 2”**中提取，作为RPM的函数。分别为了气缸1和气缸2。这个系统允许你自定义提前点火给每一个气缸，保证一个引擎尝试着有几个气缸和其他的运行的不同（例如：冷却问题）。你可以设置的种类，被转换为机轴角度作为引擎rpm值的函数。

12.7 开始提前点火

开始提前点火根据三个严格的相关的参数：

	- 开始提前**“Start Teeth Advance”**
	- 临界值回到开始齿提前**“Start Advance RPM threshold”**
	- 开始齿提前之后现象的存在**“Start Advance RPM Hysteresis”**

点火提前**“Start Teeth Advance ”**在引擎启动的阶段，代表一个特殊的情况，低引擎速度值的提前计算。在提前阶段，线圈变换了通过使用齿回馈给TDC作为参考。
但是不包括齿的部分（例如：如果你的TDC点在齿23和齿24之间，线圈将被转换，根据齿23的回馈）。点火在一毫秒的延后根据电池的电压和线圈准备的时间。你可以改变线圈开始点火的位置（这就是点火提前）根据确切的齿数。在这个很明显正确的运用好过于提前飞轮拥有足够数量的齿数来允许一个有原因的更正。

（例子：60 齿---齿之间6°的间隔）

下面的这个例子关于标准的60-2飞轮，在20齿上有TDC。开始提前被设置为1（有齿19）。在100RPM引擎曲柄速度，线圈准备时间是5毫秒，你获得一个3°确切的提前点火。

这个函数在引擎速度低于**“Start Advance RPM threshold”**时运用，转换为rpm。在引擎速度高于**“Start Advance RPM threshold”**和**“Start Adcance RPM Hysteresis”**时候被禁用。

13. 喷射策略

喷射策略管理一系列燃料的喷射，根据引擎运转的不同情况。除去简单的喷射map，一系列正确的参数用来提高引擎运行参数需要考虑，然后来提高引擎的运行状态。

双击**“”Injection“**

13.1 基本的喷射（基于3D inj.map f(RPM/Throt/SwMap)）

这是很多燃料，**”QinjBase“**,喷射函数基于RPM/throttle(节气阀) possion/double map switch position。每个气缸的喷射燃料，每个引擎循环，转换为微升作为RPM和throttle position的函数。

在相同的项中，你可以设置两种不同的maps,那样可以激活两map转换的模式

double map位置转变根据图形上的Z轴。如果这里没有双map转换，被激活的就是第一个map。然而，在这种情况下，这个比较安全，复制相同的map给两种可能的转变位置，这样可以阻止任何由电磁干扰而引起的问题。

显示和修改在3D喷射map中的值，遵循和提前点火策略段落相同的方法。基本的3D喷射map,开始点从最后喷射的燃料的计算值，许多更正的参数都加在图形的下面。 

注意1：如果空气压力的maps被使用（见2.11），你必须使用**”Base 3D inj.Map f(RPM/InletP)“**双重的map，使用空气压力代替节气阀。在应用之前要进行考虑。

注意2：接下来的更正因素有各种类型。这个意思就是，举个例子，一个值等于2将是双喷射总和，然后一个值等于0.5将是1/2喷射总和。1表示什么都不改变。

13.2 高度更正

这个值（**OffAlt**）自动地进行更正，通过调整喷射量基于现在大气压力（车辆当天的使用）和根据基础map校核出的大气压力的比较。如果可行的话，在同一天创建主map是非常重要的（因为大气压力随着时间变化会变化）这样参考的大气压力在开始阶段mapping然后继续进行相关联。用于计算的参数在下面显示:

	- 基本的喷射规模参数，**“Barometric Correction Scale Factor”**，根据RPM函数进行变换。标准的值的系数是1.00，但是系数范围可以从0到2（如果他证实太强或太弱时使用）
	**Note**建议你不使用系数（每一个设置为0.00）给测试的map，这样它就没有比较在mapping的工程中。
	- 参考气压，**Pbaro Mapping**，用mbar，在一天的空气压力，引擎被mapped。这个可以通过设置**Baro Pressure Reference**
	- 空气压力，**Pbaro**，这个通过引擎处理，转换为mbar(空气压力)

高度更正通过**OffsAlt**表明，计算公式：
	
	**OffsAlt=(PbaroMapping -Pbaro)* Barometric Correction Scale Factor**

换句话说，在引擎mapping处理过程中的压力值和通过立即处理的值的计算的不同。不同部分的结果通过基本规模参数的增加。

如果maps作为节气阀位置的函数，ECU计算基本燃料的喷射量，**Qinj**，根据下面的公式：

**公式**

如果maps使用空气压力的函数，ECU计算基本燃料的喷射量，**Qinj**，根据下面的公式：

**公式**

喷射量必须有，然后被增加通过不同的更正系数，通过下面介绍的定义。

13.3 规模参数

规模参数，**KiScale**,是喷射时间参数的一个增加更正。这个值从**“Scale Factor”**中设置。它增加基本的喷射燃料的量，范围从0到2。使用这个参数来迅速地增加和减少喷油量，在整个map中。

13.4 喷射更正 f(Inlet air pressure)

喷射更正f(入口空气压力)是一个更正参数作为入口压力函数的，值读取来自**“Injection Correction f(InletP)”**map，值的范围从0到2

13.5 喷射更正 f(空气温度)

喷射更正f(空气温度)是一个更正参数作为空气温度函数的，值读取来自**“Injection Correction f(tair)”**map，值的范围从0到2

13.6 喷射更正 f(节气阀 ，rpm)

喷射更正f(节气阀 ，rpm)是一个更正参数作为节气阀位置函数的，值读取来自**“Injection Correction f(Thr,Rpm)”**map，值的范围从0到2

这个更正必须使用，如果map使用了空气压力作为函数（看2.1.1），否则必须被设置为1。

13.7 启动后改进

启动之后的喷射，**KiStart**，它从**“Injection Corr f(TH2O,N_TDC)”**map中提取。他包括燃料喷射量的更正，通过水温函数以及在引擎启动后消逝的TDCs的数量，它的值的范围是0到8。

最多24个断点的TDC,可以通过**：Starting INjection Breakpoints：**来设置变量，你可以通过设置TDCs最大值通过**“Number of TDC Breakpoints”**。当引擎启动之后达到了最大的TDCs数量，（最后的**“Starting Injection Breakpoint”**值），更正函数依然运行。从前面的时刻，最后的**“Injection Corr f(TH2O,N_TDC)”**栏目被用在更正喷射，这个是根据水温函数来的。

13.8 独立缸体更正

喷射的更正从**“Injection Correction：CYL 1”**以及**“Injection Correction：CYL 2”**maps中提取，作为RPM函数，分别代表气缸1，气缸2。这个系统允许你定制每个气缸的喷射量，如果引擎需要一些气缸工作状态不同于其他（例如：空气量接近气缸的没有被破坏）

13.9 两个喷射存储 的分配

每个气缸的喷射燃料的数量在两个喷射存储中分配，当两个喷射气缸被使用的时候。

分配从**“Injector Bank Radio f(RPM,Thr)”**map中获取，还根据引擎rmp以及节气阀位置函数。

在map中的值代表必须给单个喷射的百分比（100%表示所有的燃料进入第一喷射部分，没有进入第二喷射部分，0%表示所有的都进入第二喷射部分）。

所提供的喷射流的速度，数量被转换为喷射打开时间。如果时间从在分配之后一个存储计算的值低于最小的时间（见5.2.3和5.2.4），所有的燃料喷射进其他的存储。

分配百分比通过IIR过滤进行过滤，使用两种不同的系数

	- 当百分比上扬时，系数通过**“Filter for bottom to top radio transitions”**
	- 当百分比下降时，系数通过**“Filter for top to bottom ratio transitions”**

14. 喷射策略在引擎启动

正确打开引擎后，这里有一个特殊的喷射操作模式在转动曲柄摇动时（曲轴摇转对于速率），在这个环境中，喷射不是有顺序的暂停。喷射在所有气缸和每个齿的启动飞轮，表现的是同时发生的。这个喷射模式停止，是当引擎速度达到足够时或者喷射燃料累计达到临界值。转换为有序的喷射仅仅在引擎速度超过临界值时启动。

如果燃料量达到临界但是引擎的速度没有达到临界值，这就没有任何喷射动作。累计器被设置为0当ECU启动时。然而，在一个不成功启动之后，你必须重启ECU然后再次启动，进行启动程序。

双击**“Injection（Fire——up）”**来配置这个功能。

14.1 在启动过程中喷射燃料

这个参数，**“Start Fuel/Tool/Cylinder”**指定每个齿和每个气缸燃料数量的，单位毫升（ul）

14.2 最大开始燃料 f(水温)

这个参数，**“”Max Starting Fuel f（TH20）**表示，喷射燃亮数量的限制，根据每毫升累计，根据水温函数定义。

其他参数的更新在最初的参数组里（其他参数被用在在ECU开始）

14.3 RPM临界值对于退出启动喷射来说

这个参数**“RPM for Exiting Start Fuelling”**，指定退出启动程序以及开始顺序暂停喷射的引擎速度的临界值。

15. 瞬态和截止

在瞬态（移动的节气阀），改进/enleanment 参数被加到喷射数量中计算。

双击**“Transient & Cutoff”**进行配置

15.1 节气阀派生物（导数）

改进和enleanment(当节气阀瞬变被激活)的计算是通过节气阀导数值，立刻地。作为一个规则，节气阀导数表示节气阀开关的速度。节气阀导数的内容以插画的形式通过一个例子在下面说明：

		节气阀slow opening---导数small value(正值)
		节气阀fast opening---导数big value(正值)
		节气阀slow closing---导数small value（负值）
		节气阀fast opening---导数big value（负值）

15.1.1 节气阀导数时间周期

这个导数通过计算可编程时间，以及可以提供正的或负的值，被转换为百分比，节气阀/ms。系数计算时间通过**“Throttle Deriv Time Period”**参数来设置。计算时间越短ECU反应的越精确越迅速，即使一些不稳定以及计算错误会发生。

导数计算的符号决定是加速（正）还是减速（负）。在决定是加速还是减速的状态之后，导数一直被认为是正值。因此，被定义的临界值将是正值在两种情况下。在达到最大值之后，导数将保持一个常数在一个确定的一段时间，随后就恢复到0通过增加倾斜补偿可编程器通过**Accel:Throttle Deriv Slop**以及**Decel:Throttle Deriv Slope**参数。

15.1.2 导数维护延迟

导数维护时间的最大值通过**“Deriv Maintenance Delay”**设置。一旦**Deriv Maintenance Delay**时间消逝，导数被恢复为0通过遵循有一个有斜率的直线而不是遵循它实际的值。

15.1.3 加速：节气阀导数斜率，减速：节气阀导数斜率

直线的斜率使导数值回到0，必须设置**“Accel：Throttle Derive Slope”**参数对于正的导数部分（例如:加速），通过**“”Decel：Throttle Deriv Slope**参数对于负的导数部分（例如：减速）


















































